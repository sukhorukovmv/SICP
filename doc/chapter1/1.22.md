#[Глава 1](../index.md#Глава-1-Построение-абстракций-с-помощью-процедур)

### Упражнение 1.22
Большая часть реализаций Лиспа содержат элементарную проце ´ дуру runtime, которая возвращает целое число, показывающее, как долго работала система (например, в миллисекундах). Следующая процедура timed-prime-test, будучи вызвана с целым числом n, печатает n и проверяет, простое ли оно. Если n простое, процедура печатает три звездочки и количество времени,затраченное на проверку.
```
    (define (timed-prime-test n)
      (newline)
      (display n)
      (start-prime-test n (runtime)))
    (define (start-prime-test n start-time)
      (if (prime? n)
          (report-prime (- (runtime) start-time))))
    (define (report-prime elapsed-time)
      (display " *** ")
      (display elapsed-time))
```
Используя эту процедуру, напишите процедуру search-for-primes, которая проверяет на простоту все нечетные числа в заданном диапазоне. С помощью этой процедуры найдите наименьшие три простых числа после 1000; после 10 000; после 100 000; после 1 000 000. Посмотрите, сколько времени затрачивается на каждое простое число. Поскольку алгоритм проверки имеет порядок роста Θ(√ n), Вам следовало бы ожидать, что проверка на простоту чисел, близких к 10 000,занимает в √ 10 раз больше времени, чем для чисел, близких к 1000. Подтверждают ли это Ваши замеры времени? Хорошо ли поддерживают предсказание √ n данные для 100 000 и 1 000 000? Совместим ли Ваш результат с предположением, что программы на Вашей машине затрачивают на выполнение задач время, пропорциональное числу шагов?

#### Решение
> [Code](../../src/chapter1/1.22.rkt) 
```
    > (search-for-primes 1000 3)
    1009 *** 0.010986328125
    1013 *** 0.00390625
    1019 *** 0.004150390625

    > (search-for-primes 10000 3)
    10007 *** 0.011962890625
    10009 *** 0.005859375
    10037 *** 0.01806640625

    > (search-for-primes 100000 3)
    100003 *** 0.01806640625
    100019 *** 0.02587890625
    100043 *** 0.030029296875

    > (search-for-primes 1000000 3)
    1000003 *** 0.041015625
    1000033 *** 0.05517578125
    1000037 *** 0.03515625
```

Утвердительно мы можем ответить и на вопрос о совместимости полученного результата с предположением, что программы на машине затрачивают на выполнение задач время, пропорциональное числу шагов. Это очень важный факт, который, впрочем, как и многие другие важные и основополагающие факты, кажется очевидным.


