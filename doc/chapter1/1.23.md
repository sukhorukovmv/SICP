#[Глава 1](../index.md#Глава-1-Построение-абстракций-с-помощью-процедур)

### Упражнение 1.23
Процедура smallest-divisor в начале этого раздела проводит множество лишних проверок: после того, как она проверяет, делится ли число на 2, нет никакого смысла проверять делимость на другие четные числа. Таким образом, вместо последовательности 2, 3, 4, 5, 6 . . . , используе мой для test-divisor, было бы лучше использовать 2, 3, 5, 7, 9 . . . . Чтобы реализовать такое улучшение, напишите процедуру next, которая имеет результатом 3, если получает 2 как аргумент, а иначе возвращает свой аргумент плюс 2. Используйте (next test-divisor) вместо (+test-divisor 1) в smallest-divisor. Используя процедуру timed-prime-test с модифицированной версией smallest-divisor, запустите тест для каждого из 12 простых чисел,найденных в упражнении 1.22. Поскольку эта модификация снижает количество шагов проверки вдвое, Вы должны ожидать двукратного ускорения проверки. Подтверждаются ли эти ожидания? Если нет, то каково наблюдаемое соотношение скоростей двух алгоритмов, и как Вы объясните то, что оно отличается от 2?

#### Решение
> [Code](../../src/chapter1/1.23.rkt) 
Результат упражнения 1.22
```
> (search-for-primes 1000 3)

1009 *** 0.003173828125
1013 *** 0.0029296875
1019 *** 0.0029296875
> (search-for-primes 10000 3)

10007 *** 0.005126953125
10009 *** 0.017822265625
10037 *** 0.007080078125
> (search-for-primes 100000 3)

100003 *** 0.011962890625
100019 *** 0.011962890625
100043 *** 0.013916015625
> (search-for-primes 1000000 3)

1000003 *** 0.034912109375
1000033 *** 0.0361328125
1000037 *** 0.037109375
```

Результат решения упражнения
```
> (search-for-primes 1000 3)
1009 *** 0.005126953125
1013 *** 0.005859375
1019 *** 0.005126953125

> (search-for-primes 10000 3)
10007 *** 0.010986328125
10009 *** 0.012939453125
10037 *** 0.011962890625

> (search-for-primes 100000 3)
100003 *** 0.032958984375
100019 *** 0.032958984375
100043 *** 0.68896484375

> (search-for-primes 1000000 3)
1000003 *** 0.10107421875
1000033 *** 0.10009765625
1000037 *** 0.100830078125
```
Скорее всего результат будет заметен на больших чисел.
